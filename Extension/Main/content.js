(function() {
  'use strict';

  setTimeout(function() {

    function replaceNumber(key, value) {
      currentUrl = currentUrl.replace(new RegExp(key + '=-?\\d+', 'g'), key + '=' + value);
    }

    function getCurrentValue(key) {
      var regex = new RegExp(key + '=(-?\\d+)', 'g');
      var match = currentUrl.match(regex);
      return match ? match[0].split('=')[1] : '';
    }

    function showGUI() {
      var gui = document.createElement('div');
      gui.id = 'bitmoji-exploit-gui';
      gui.classList.add('bitmoji-exploit-gui');
      gui.innerHTML = `
        <div class="bitmoji-exploit-header">
          <div class="bitmoji-exploit-title">ğ„ğ±ğ©ğ¥ğ¨ğ¢ğ­ â”‚ @ğŸ”ğ®ğ¡ğ¥ğ¥ğğ­ğ³</div>
          <div class="bitmoji-exploit-buttons">
            <button id="bitmoji-exploit-minimize-button" class="bitmoji-exploit-button">â–</button>
            <button id="bitmoji-exploit-close-button" class="bitmoji-exploit-button">âœ–ï¸</button>
          </div>
        </div>
        <div class="bitmoji-exploit-body">
          <select id="bitmoji-exploit-select" class="bitmoji-exploit-select">
            <option value="" disabled selected>ğ˜šğ˜¦ğ˜­ğ˜¦ğ˜¤ğ˜µ ğ˜¢ğ˜¯ ğ˜°ğ˜±ğ˜µğ˜ªğ˜°ğ˜¯</option>
            <option value="gender">Gender</option>
            <option value="cheek_details">Cheek Details</option>
            <option value="top">Top</option>
            <option value="bottom">Bottom</option>
            <option value="outerwear">Outerwear</option>
            <option value="footwear">Footwear</option>
            <option value="glasses">Glasses</option>
            <option value="hat">Hat</option>
            <option value="outfit">Outfit</option>
            <option value="mouth">Mouth</option>
            <option value="hair">Hair</option>
            <option value="skin_tone">Skin Tone</option>
            <option value="jaw">Jaw</option>
            <option value="brow">Brow</option>
            <option value="eye">Eye</option>
            <option value="eyelash">Eyelash</option>
            <option value="pupil">Pupil</option>
            <option value="nose">Nose</option>
            <option value="ear">Ear</option>
            <option value="pupil_tone">Pupil Tone</option>
            <option value="hair_tone">Hair Tone</option>
          </select>
          <div id="bitmoji-exploit-current-value" class="bitmoji-exploit-current-value">Current Value:</div>
          <input id="bitmoji-exploit-input" class="bitmoji-exploit-input" type="text" placeholder="ğ—œğ——: ğ—².ğ—´  â€ŸğŸ­ğŸ®ğŸ¯ğŸ°â€">
          <button id="bitmoji-exploit-update-button" class="bitmoji-exploit-button">ğš„ğš™ğšğšŠğšğšâœ”ï¸</button>
        </div>
      `;
      document.body.appendChild(gui);

      // Add styles for the GUI
      var styles = `
        #bitmoji-exploit-gui {
          position: fixed;
          top: 20px;
          left: 20px;
          background-color: #222;
          color: #fff;
          border: 1px solid #555;
          border-radius: 10px;
          padding: 15px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
          font-family: 'Arial', sans-serif;
          transition: all 0.3s ease;
          width: 300px;
          z-index: 1000;
        }
        .bitmoji-exploit-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }
        .bitmoji-exploit-title {
          font-size: 1.2em;
          font-weight: bold;
        }
        .bitmoji-exploit-buttons button {
          background: none;
          border: none;
          color: #fff;
          font-size: 1.2em;
          cursor: pointer;
        }
        .bitmoji-exploit-buttons button:hover {
          color: #f00;
        }
        .bitmoji-exploit-body {
          display: flex;
          flex-direction: column;
          gap: 10px;
        }
        .bitmoji-exploit-select,
        .bitmoji-exploit-input,
        .bitmoji-exploit-button {
          padding: 5px;
          border: 1px solid #555;
          border-radius: 5px;
          background-color: #333;
          color: #fff;
        }
        .bitmoji-exploit-button {
          cursor: pointer;
          transition: background-color 0.3s ease;
        }
        .bitmoji-exploit-button:hover {
          background-color: #444;
        }
      `;
      var styleSheet = document.createElement('style');
      styleSheet.type = 'text/css';
      styleSheet.innerText = styles;
      document.head.appendChild(styleSheet);

      // Event listeners
      var buttons = document.querySelectorAll('.bitmoji-exploit-button');
      buttons.forEach(function(button) {
        button.addEventListener('mouseenter', function() {
          button.style.backgroundColor = '#666';
        });
        button.addEventListener('mouseleave', function() {
          button.style.backgroundColor = '';
        });
      });

      var select = document.getElementById('bitmoji-exploit-select');
      var currentValueLabel = document.getElementById('bitmoji-exploit-current-value');
      var input = document.getElementById('bitmoji-exploit-input');
      var updateButton = document.getElementById('bitmoji-exploit-update-button');

      select.addEventListener('change', function() {
        var selectedOption = select.value;
        var currentValue = getCurrentValue(selectedOption);
        currentValueLabel.innerText = 'Current value: ' + currentValue;
      });

      updateButton.addEventListener('click', function() {
        var selectedOption = select.value;
        var newValue = input.value;
        if (newValue.trim() !== '') {
          replaceNumber(selectedOption, newValue);
          var iframe = document.querySelector('#root iframe');
          if (iframe) {
            iframe.src = currentUrl;
            alert('Updated URL:\n' + currentUrl);
          } else {
            alert('Could not find iframe element.');
          }
        } else {
          alert('Please enter a valid value.');
        }
      });

      var minimizeButton = document.getElementById('bitmoji-exploit-minimize-button');
      minimizeButton.addEventListener('click', function() {
        var body = document.querySelector('.bitmoji-exploit-body');
        if (body.style.display === 'none') {
          body.style.display = 'block';
          minimizeButton.innerText = 'â–';
        } else {
          body.style.display = 'none';
          minimizeButton.innerText = 'â•';
        }
      });

      var closeButton = document.getElementById('bitmoji-exploit-close-button');
      closeButton.addEventListener('click', function() {
        gui.remove();
      });
    }

    var originalUrl = '';
    var currentUrl = '';

    var iframe = document.querySelector('#root iframe');
    originalUrl = iframe ? iframe.src : '';
    currentUrl = originalUrl;
    showGUI();
  }, 340);
})();